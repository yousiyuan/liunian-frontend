分布式Session - 服务器集群的时候会发生哪些问题？

服务器集群之后会出现哪些问题(分布式解决方案)

1、分布式session问题(因为session存放在服务器端，Session ID找不到对应Session)

2、分布式任务调度平台(服务器集群之后如何保证定时的Job唯一性)幂等性的实现

3、分布式锁解决方案(全局ID)

(1) 基于zookeeper使用临时节点 + 事件通知

(2) 基于Redis setnx方式(不推荐)。缺点:容易死锁、代码复杂

(3) SpringCloud对Redisson Redis中提供很多关于分布式解决方案,如：分布式锁

4、分布式日志搜集问题

ELK、大型的电商互联网内部分布式日志搜集

5、分布式事务问题(与集群没有关系)

主要指RPC远程通讯，服务与服务之间实现事务管理。对LCN框架的运用。

6、分布式配置中心(与集群没有关系)


面试官经常会问：你在做项目的时候，遇到过哪些问题？(以上6个部分可作为回答内容)


一、分布式Session解决方案

1、可以直接使用Cookie代替Session；(不安全，不推荐)

2、使用Nginx(的反向代理)进行IP绑定；(IP绑定，使同一个客户端IP地址只能在指定的同一台服务器进行访问，相当于没有做负载均衡，不推荐)

3、使用数据库保存Session信息；(效率低，不推荐)

4、Tomcat内置支持对Session进行同步；(同步可能会产生延迟，不推荐)

5、使用Spring-Session框架；(相当于把Session数据缓存到Redis中，推荐，推荐。。。)

原理：重写 HTTP Session 框架，将对应的值缓存到redis中，有点类似于一级缓存与二级缓存。

6、使用自定义token替代Session功能；(推荐，推荐。。。)


面试题：你们项目在发布的时候，是如何控制Session不失效的。

答：使用缓存框架，缓存Session数据。(一级缓存Ehcache和二级缓存Redis)

